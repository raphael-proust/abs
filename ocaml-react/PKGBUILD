
#Contributor: serp <serp 256 at gmail dot com>
libname=react
pkgname=ocaml-$libname
pkgver=0.9.2
pkgrel=3
pkgdesc="An OCaml module for functional reactive programming"
arch=('i686' 'x86_64')
url="http://erratique.ch/software/react"
license=('BSD')
depends=('ocaml>=3.11.0' 'ocaml-findlib')
source=(http://erratique.ch/software/$libname/releases/$libname-$pkgver.tbz react.diff)
md5sums=('ecbe0fa4d7d0fd1076cce5decf7a86b7'
         'f12b2c4038808ee2396ec7b33d4161a9')

build() {
  cd $srcdir/$libname-$pkgver
  sh build || return 1
  sh build doc
}

package() {
   cd $srcdir/$libname-$pkgver
   patch -Np0 < ../react.diff
   mkdir -p "$pkgdir/$(ocamlfind printconf destdir)"
   OCAMLFIND_DESTDIR="$pkgdir/$(ocamlfind printconf destdir)" \
   ocamlfind install react src/META _build/src/react.{cmi,mli,cmx,cmo}
   DOCDIR=$pkgdir/usr/share/doc/$pkgname
   mkdir -p $DOCDIR
   cp -r doc/* $DOCDIR
}
